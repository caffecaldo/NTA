<% today = Date.today %>
<% first_of_month = today.beginning_of_month %>
<% last_of_month = today.end_of_month %>
<% date_a = first_of_month.step(last_of_month, 1).to_a %>
<h2><%= today.strftime("%B %Y") %></h2>

<table id="fixedcolDT">
<thead>
  <tr>
    <th>Name</th>
    <% date_a.each do |d| %>
      <th><%= d.day %></th>
    <% end %>
  </tr>
</thead>

<tbody>
<% @students.each do |s| %>
  <tr>
    <td><%= s.revfullname %></td>
    <% stud_att = Attendance.where(:student_id => s.id) %>
    <% date_a.each do |d| %>
        <% if stud_att.where(:class_date => d).exists? %>
          <td><%= text_field_tag s.id, stud_att.where(:class_date => d).class_hours, :size => 1 %></td>
        <% else %>
          <td><%= text_field_tag s.id, nil, :placeholder => "-", :size => 1 %></td>
        <% end %>
    <% end %>
  </tr>
<% end %>
</tbody>
</table>

